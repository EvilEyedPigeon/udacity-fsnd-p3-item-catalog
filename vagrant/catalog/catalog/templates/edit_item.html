{% extends "main.html" %}

{% block page_header %}

<h1>Edit item: {{ item.name }}</h1>

<p>
    <a class="col" href="{{ url_for('view_catalog') }}"><span class="glyphicon glyphicon-home"></span> Catalog home</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_category', category_id = item.category_id) }}"><span class="glyphicon glyphicon-folder-close"></span> Category home</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_item_json', item_id = item.id) }}"><span class="glyphicon glyphicon-download-alt"></span> Item JSON</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_item', item_id = item.id) }}"><span class="glyphicon glyphicon-file"></span> View item</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('delete_item', item_id = item.id) }}"><span class="glyphicon glyphicon-trash"></span> Delete item</a>
</p>

{% endblock %}


{% block content %}

<form method="POST" enctype="multipart/form-data" action="{{ url_for('edit_item', item_id = item.id) }}">
    <dl>
        <dt><label for="name">Name:</label></dt>
            <dd>
                <input type="text" id="name" name="name" size="50" value="{{ item.name }}"/>
            </dd>
        <dt><label for="description">Description:</label></dt>
            <dd>
                <textarea id="description" name="description" rows="5" cols="50">{{ item.description }}</textarea>
            </dd>
        <dt><label for="category">Category:</dt>
            <dd>
                <select id="category" name="category_id">
                    {% for c in categories %}
                    <option value="{{ c.id }}" {% if item.category == c %}selected{% endif %}>{{ c.name }}</option>
                    {% endfor %}
                </select>
            </dd>
        <dt><label for="image">Image:</dt>
            <dd>
                <input type="file" name="image"><br/>
            </dd>
        <dt><label for="image">Current image:</dt>
            <dd>
                <img width="300" src="{{ get_image_url(item.image) }}">
            </dd>
        <dt>Created by:</dt>
            <dd>{{ item.user.name }}</dd>
        <dt>Created on:</dt>
            <dd>{{ item.created.strftime("%Y-%m-%d %H:%M:%S") }}</dd>
        <dt>Last modified:</dt>
            <dd>{{ item.updated.strftime("%Y-%m-%d %H:%M:%S") }}</dd>
    </dl>
    <input type="submit" value="Save">
</form>

<p>
<a href="{{ url_for('view_catalog') }}">Cancel</a><br/>
</p>

{% endblock %}
