{% extends "main.html" %}

{% block page_header %}

<h1>Edit item: {{ item.name }}</h1>

<p>
    <a class="col" href="{{ url_for('view_catalog') }}"><span class="glyphicon glyphicon-home"></span> Catalog home</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_category', category_id = item.category_id) }}"><span class="glyphicon glyphicon-folder-close"></span> Category home</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_item_json', item_id = item.id) }}"><span class="glyphicon glyphicon-download-alt"></span> Item JSON</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('view_item', item_id = item.id) }}"><span class="glyphicon glyphicon-file"></span> View item</a>
    &nbsp;|&nbsp;
    <a class="col" href="{{ url_for('delete_item', item_id = item.id) }}"><span class="glyphicon glyphicon-trash"></span> Delete item</a>
</p>

{% endblock %}


{% block content %}

<form method="POST" enctype="multipart/form-data" action="{{ url_for('edit_item', item_id = item.id) }}">
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                <label for="name">Name:</label>
                <input class="form-control" type="text" id="name" name="name" size="50" value="{{ item.name }}"/>
            </div>
            <div class="form-group">
                <label for="description">Description:</label>
                <textarea class="form-control" id="description" name="description" rows="5" cols="50">{{ item.description }}</textarea>
            </div>
            <div class="form-group">
                <label for="category">Category:</label>
                <select class="form-control" id="category" name="category_id">
                    {% for c in categories %}
                    <option value="{{ c.id }}" {% if item.category == c %}selected{% endif %}>{{ c.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="image">Image:</label>
                <input class="form-control" type="file" name="image"/><br/>
            </div>
        </div>
        <div class="col-sm-6 text-right">
            <img id="image" name="image" width="300" src="{{ get_image_url(item.image) }}">
        </div>
    </div>
    <dl class="dl-horizontal">
        <dt>Created by:</dt>
            <dd>{{ item.user.name }}</dd>
        <dt>Created on:</dt>
            <dd>{{ item.created.strftime("%Y-%m-%d %H:%M:%S") }}</dd>
        <dt>Last modified:</dt>
            <dd>{{ item.updated.strftime("%Y-%m-%d %H:%M:%S") }}</dd>
    </dl>
    <input type="submit" class="btn btn-primary btn-block" value="Save"/>
    <a class="btn btn-default btn-block" href="{{ url_for('view_item', item_id = item.id) }}">Cancel</a><br/>
</form>

{% endblock %}
